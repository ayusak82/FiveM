# ng-rental-bike

バイクレンタルシステム - FiveM QBCore用のレンタルバイクスクリプト

## 📋 概要

プレイヤーが指定されたレンタルポイントでバイクをレンタルできるシステムです。
降車後180秒でバイクが自動的に削除され、再度レンタルポイントでレンタル可能になります。

## ✨ 主な機能

- 📍 複数のレンタルポイントを設定可能
- 🚴 ゾーン内でEキーを押してレンタル
- 🔄 1プレイヤー1台まで同時レンタル可能
- ⏱️ 降車後180秒で自動削除
- 🔁 再乗車でタイマーキャンセル
- 🧹 プレイヤー切断時の自動クリーンアップ
- 🎨 ox_libの最新UIを使用
- 🇯🇵 完全日本語対応

## 📦 依存関係

このスクリプトを使用するには、以下のリソースが必要です：

- [qb-core](https://github.com/qbcore-framework/qb-core)
- [ox_lib](https://github.com/overextended/ox_lib)

## 🔧 インストール方法

1. `ng-rental-bike` フォルダをサーバーの `resources` フォルダに配置します

2. `server.cfg` に以下を追加します：
```cfg
ensure qb-core
ensure ox_lib
ensure ng-rental-bike
```

3. サーバーを再起動します

## ⚙️ 設定方法

`shared/config.lua` を編集して設定をカスタマイズできます。

### 基本設定

```lua
-- デバッグモード（ゾーンの視覚化）
Config.Debug = false

-- 降車後のバイク削除タイマー（秒）
Config.DismountTimer = 180
```

### レンタルポイントの追加

```lua
Config.RentalPoints = {
    {
        name = "レンタルポイント1", -- ポイント名
        coords = vector3(-1035.71, -2731.09, 20.17), -- ゾーン座標
        radius = 3.0, -- ゾーン半径
        bikeModel = "bmx", -- バイクモデル
        spawnCoords = vector4(-1035.71, -2731.09, 20.17, 240.0), -- スポーン位置(x, y, z, heading)
    },
    -- 新しいポイントを追加する場合：
    {
        name = "レンタルポイント2",
        coords = vector3(x, y, z),
        radius = 3.0,
        bikeModel = "cruiser",
        spawnCoords = vector4(x, y, z, heading),
    },
}
```

### 通知メッセージのカスタマイズ

```lua
Config.Notifications = {
    rental_success = "バイクをレンタルしました",
    rental_failed = "バイクのレンタルに失敗しました",
    already_rented = "既にバイクをレンタルしています",
    bike_deleted = "レンタルバイクが削除されました",
    dismount_warning = "降車後180秒でバイクが削除されます",
    timer_cancelled = "タイマーがキャンセルされました",
    press_to_rent = "[E] バイクをレンタル",
}
```

## 🎮 使用方法

1. レンタルポイント（ゾーン）に近づきます
2. 画面に「[E] バイクをレンタル」と表示されます
3. **Eキー**を押してバイクをレンタルします
4. バイクが自動的にスポーンし、プレイヤーが乗車します
5. バイクから降りると180秒のタイマーが開始されます
6. 180秒以内に再度乗車するとタイマーがキャンセルされます
7. 180秒経過するとバイクが自動的に削除されます

## 🚨 注意事項

- 1プレイヤーにつき1台までレンタル可能です
- 既にレンタル中の場合は新しくレンタルできません
- プレイヤーが切断すると、レンタルバイクは自動的に削除されます
- リソースを停止すると、すべてのレンタルバイクが削除されます

## 🐛 デバッグモード

`Config.Debug = true` に設定すると：
- ゾーンが視覚化されます（球体として表示）
- コンソールに詳細なログが出力されます

デバッグモードは開発・テスト時のみ使用してください。

## 📝 バイクモデル例

GTA5で使用可能なバイクモデルの例：

- `bmx` - BMX
- `cruiser` - クルーザー
- `fixter` - フィクスター
- `scorcher` - スコーチャー
- `tribike` - トライバイク
- `tribike2` - トライバイク2
- `tribike3` - トライバイク3

その他のバイクや車両モデルも使用可能です。

## 📄 ライセンス

このスクリプトはエスクロー保護されています。
`shared/config.lua` のみ編集可能です。

## 👤 作成者情報

**作者**: NCCGr  
**お問い合わせ**: Discord: ayusak

## 🔄 更新履歴

### Version 1.0.0
- 初回リリース
- 基本的なレンタル機能
- 降車タイマー機能
- マルチポイント対応
- 日本語対応

---

## ❓ よくある質問

**Q: バイクが消えないのですが？**  
A: バイクから降りて180秒経過すると自動的に削除されます。再度乗車するとタイマーはキャンセルされます。

**Q: 複数のバイクをレンタルできますか？**  
A: いいえ、1プレイヤーにつき1台までです。

**Q: レンタルポイントはいくつまで設定できますか？**  
A: 制限はありません。`Config.RentalPoints`に追加してください。

**Q: カスタムバイクモデルは使用できますか？**  
A: はい、サーバーに追加されているモデルであれば使用可能です。

**Q: タイマーの時間を変更できますか？**  
A: はい、`Config.DismountTimer`の値を変更してください（秒単位）。

---

ご不明な点がございましたら、Discordまでお問い合わせください。
